<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The lb-workflow Samples Directory</title>

    <link href="lb-favicon.png"    rel="shortcut icon" type="image/x-icon" />
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="lb-workflow.css"   rel="stylesheet">    
  </head>
  <body>
    <div class="container header-container">
      <div class="row header">
        <div class="col-lg-2">
          <a href="http://logicblox.com"><img src="lblogo.png" alt="LogicBlox, Inc."></a>
        </div>
        <div class="col-lg-10">
          <a href="index.html"><h1 class="text-center">The lb-workflow Samples Directory</h1></a>
        </div>
      </div>
    </div>

    <div class="container contents-container">
      <div class="row">
        <div class="col-lg-2 sidebar">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav">
              <li class="sidebar-group-header">Workflows
                <ul class="nav sidebar-group">
                    <li class="other"><a href="#106860705" title="exec_block">exec_block</a></li>
                    <li class="other"><a href="#1111717364" title="exec_fail">exec_fail</a></li>
                    <li class="other"><a href="#1592000793" title="exec_multiple_blocks">exec_multiple_blocks</a></li>
                    <li class="other"><a href="#2042357747" title="exec_par">exec_par</a></li>
                    <li class="other"><a href="#92748902" title="exec_query">exec_query</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Standard Library
                <ul class="nav sidebar-group">
                    <li class="other"><a href="control_1096407654.html" title="control.wf">control.wf</a></li>
                    <li class="other"><a href="jobs_2064022591.html" title="jobs.wf">jobs.wf</a></li>
                    <li class="other"><a href="log_1948900833.html" title="log.wf">log.wf</a></li>
                    <li class="other"><a href="stdlib_623000472.html" title="stdlib.wf">stdlib.wf</a></li>
                    <li class="other"><a href="string_1421446234.html" title="string.wf">string.wf</a></li>
                    <li class="other"><a href="tasks_1083303394.html" title="tasks.wf">tasks.wf</a></li>
                    <li class="other"><a href="tdx_1729519909.html" title="tdx.wf">tdx.wf</a></li>
                    <li class="other"><a href="testing-tasks_1856821761.html" title="testing-tasks.wf">testing-tasks.wf</a></li>
                    <li class="other"><a href="workbooks_290480778.html" title="workbooks.wf">workbooks.wf</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Additional Resources
                <ul class="nav sidebar-group">
                    <li class="other"><a href="index.html" title="Index">Index</a></li>
                    <li class="other"><a href="backup_1332419570.html" title="backup/wf/backup.wf">backup/wf/backup.wf</a></li>
                    <li class="other"><a href="load_2058935082.html" title="backup/wf/load.wf">backup/wf/load.wf</a></li>
                    <li class="other"><a href="restore_1204968188.html" title="backup/wf/restore.wf">backup/wf/restore.wf</a></li>
                    <li class="other"><a href="main_633623232.html" title="param/wf/main.wf">param/wf/main.wf</a></li>
                    <li class="other"><a href="partition_1866736532.html" title="partition/wf/partition.wf">partition/wf/partition.wf</a></li>
                    <li class="other"><a href="bar_840371832.html" title="purge/bar.wf">purge/bar.wf</a></li>
                    <li class="other"><a href="fail_1033209759.html" title="purge/fail.wf">purge/fail.wf</a></li>
                    <li class="other"><a href="foo_713015307.html" title="purge/foo.wf">purge/foo.wf</a></li>
                    <li class="other"><a href="url_1270117002.html" title="string/wf/url.wf">string/wf/url.wf</a></li>
                    <li class="other"><a href="export_961675574.html" title="tdx/wf/export.wf">tdx/wf/export.wf</a></li>
                    <li class="other"><a href="import_1592603335.html" title="tdx/wf/import.wf">tdx/wf/import.wf</a></li>
                    <li class="other"><a href="create_873980314.html" title="workbookutil/wf/create.wf">workbookutil/wf/create.wf</a></li>
                    <li class="other"><a href="create2_1323635598.html" title="workbookutil/wf/create2.wf">workbookutil/wf/create2.wf</a></li>
                    <li class="other"><a href="create3_1323665389.html" title="workbookutil/wf/create3.wf">workbookutil/wf/create3.wf</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>

        <div class="col-lg-10 contents">
          <div class="lb-workflow-block">
<p>Simple examples of using the <code>lb.ExecuteLogiQL</code> task to execute inactive blocks installed in a workspace or to send static LogiQL code.</p>          </div>
          <div class="lb-workflow-block" id="106860705">
<p>Execute a single inactive block.</p><pre><code class="lb-workflow"><span class="keyword">workflow</span> <span class="workflow">exec_block</span>() {
  <span class="task modal-hook" data-target="#popup_lb_ExecuteLogiQL"><a href="tasks_1083303394.html#2092655549">lb.ExecuteLogiQL</a></span>(
    service = <span class="string">"/exec-inactive"</span><span class="separator">,</span>
    block = <span class="string">"sample:add_foo"</span>
  )
}
</code></pre>
          </div>
          <div class="lb-workflow-block" id="92748902">
<p>Execute static LogiQL to update a predicate.</p><pre><code class="lb-workflow"><span class="keyword">workflow</span> <span class="workflow">exec_query</span>() {
  <span class="task modal-hook" data-target="#popup_lb_ExecuteLogiQL"><a href="tasks_1083303394.html#2092655549">lb.ExecuteLogiQL</a></span>(
    service = <span class="string">"/exec"</span><span class="separator">,</span>
    query = <span class="string">"+sample:model:record("query_data")."</span>
  )
}
</code></pre>
          </div>
          <div class="lb-workflow-block" id="1592000793">
<p>Execute multiple inactive blocks in the same transaction.</p><pre><code class="lb-workflow"><span class="keyword">workflow</span> <span class="workflow">exec_multiple_blocks</span>() {
  <span class="task modal-hook" data-target="#popup_lb_ExecuteLogiQL"><a href="tasks_1083303394.html#2092655549">lb.ExecuteLogiQL</a></span>(
    service = <span class="string">"/exec-inactive"</span><span class="separator">,</span>
    blocks = {
      <span class="string">"sample:add_bar"</span><span class="separator">,</span>
      <span class="string">"sample:add_baz"</span>
    }
  )
}
</code></pre>
          </div>
          <div class="lb-workflow-block" id="2042357747">
<p>Execute the previous workflows in parallel.</p><pre><code class="lb-workflow"><span class="keyword">workflow</span> <span class="workflow">exec_par</span>() {
  (
    <span class="workflow"><a href="#106860705">exec_block</a></span>()
  ) <span class="keyword">||</span> (
    <span class="workflow"><a href="#92748902">exec_query</a></span>()
  ) <span class="keyword">||</span> (
    <span class="workflow"><a href="#1592000793">exec_multiple_blocks</a></span>()
  )
}
</code></pre>
          </div>
          <div class="lb-workflow-block" id="1111717364">
<p>Attempt to execute an inactive block that does not exist. Fail.</p><pre><code class="lb-workflow"><span class="keyword">workflow</span> <span class="workflow">exec_fail</span>() {
  <span class="task modal-hook" data-target="#popup_lb_ExecuteLogiQL"><a href="tasks_1083303394.html#2092655549">lb.ExecuteLogiQL</a></span>(
    service = <span class="string">"/exec-inactive"</span><span class="separator">,</span>
    block = <span class="string">"sample:does_not_exist"</span>
  )
}
</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" 
                                    id="popup_lb_ExecuteLogiQL" 
                                    tabindex="-1" 
                                    role="dialog" 
                                    aria-labelledby="lb.ExecuteLogiQL" 
                                    aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content contents">
          <div class="modal-body">
          <div class="lb-workflow-block" id="2092655549">
<p>Execute LogiQL in a workspace.</p><p>There are 2 ways to define the LogiQL to execute:</p>
<ol>
  <li><p>send a static query in the <code>query</code> parameter. This is a string that represents the LogiQL to execute.</p></li>
  <li><p>define a set of inactive blocks to execute in a transaction. The blocks can be defined via the <code>block</code> and/or <code>blocks</code> parameters. They will be merged as a single set and executed together in a single transaction.</p></li>
</ol><p>This task requires that <code>service</code> points to a connectblox <code>exec_inactive_service</code> hosted by lb-web.</p><p>Unfortunatelly there&rsquo;s currently no support for getting output from the LogiQL execution.</p>
<hr/><p>@param <code>service</code> the URI to the connectblox service that performs the logiql  execution (e.g. &ldquo;/connectblox_exec&rdquo;). This is by default a standard LB4  connectblox service. If <code>legacy</code> is true, then this is the legacy custom  handler service.</p><p>@param <code>block</code> name of a block installed in the workspace that will be  executed.</p><p>@param <code>blocks</code> set of blocks installed in the workspace that will be  executed. This is the same as <code>block</code> but accepts a set of names.</p><p>@param <code>query</code> a static LogiQL query that will be executed in the workspace.</p><p>@param <code>workspace</code> name of the workspace in which to execute the query. If  not specified, the workspace hosting the service will be the target. If  <code>legacy</code> is used, this is a required parameter.</p><p>@param <code>transport</code> if not specified, the workspace will be located on the  local server. This parameter is an URL that identifies the server on which  the workspace will be located along with the port used to communicate with  the server (e.g. http://remote_server:8080).</p><p>@param <code>txn_timeout</code> a duration specifying the timeout of the call to the  service. The driver will drop the connection if this timeout is reached.</p><p>@param <code>legacy</code> true if the legacy custom handler is to be used. Only use this  if you are in the C&amp;B project and have a custom handler.</p><pre><code class="lb-workflow"><span class="keyword">task</span> <span class="task">lb.ExecuteLogiQL</span>(
    service<span class="keyword">?</span><span class="separator">,</span>
    block<span class="keyword">?</span><span class="separator">,</span>
    blocks<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    query<span class="keyword">?</span><span class="separator">,</span>
    workspace<span class="keyword">?</span><span class="separator">,</span>
    transport<span class="keyword">?</span><span class="separator">,</span>
    txn_timeout<span class="keyword">:</span> <span class="message-type" >Duration</span> = <span class="string">"320s"</span><span class="separator">,</span>
    legacy = <span class="boolean">false</span><span class="separator">,</span>
    driver_meta<span class="keyword">?</span>
  ) <span class="keyword">extends</span> <span class="task"><a href="stdlib_623000472.html#296300033">AsyncTask</a></span>(
    driver_meta = <span class="varref">$driver_meta</span><span class="separator">,</span>
    task_implementation_class = <span class="string">"com.logicblox.workflow.task.ExecuteLogiQL"</span>
  )
</code></pre>
          </div>
          </div>
        </div>
      </div>
    </div>
    <script src="jquery.min.js"></script>
    <script src="jquery.hoverIntent.minified.js"></script>
    <script src="bootstrap.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();   
    });
    $(".modal-hook").hoverIntent({
      over: function () {
        var target = $(this).attr("data-target");
        $(target).modal("show");
      },
      interval: 700
    });
    </script>
  </body>
</html>