<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The lb-workflow Samples Directory</title>

    <link href="lb-favicon.png"    rel="shortcut icon" type="image/x-icon" />
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="lb-workflow.css"   rel="stylesheet">    
  </head>
  <body>
    <div class="container header-container">
      <div class="row header">
        <div class="col-lg-2">
          <a href="http://logicblox.com"><img src="lblogo.png" alt="LogicBlox, Inc."></a>
        </div>
        <div class="col-lg-10">
          <a href="index.html"><h1 class="text-center">The lb-workflow Samples Directory</h1></a>
        </div>
      </div>
    </div>

    <div class="container contents-container">
      <div class="row">
        <div class="col-lg-2 sidebar">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav">
              <li class="sidebar-group-header">Tasks
                <ul class="nav sidebar-group">
                    <li class="other"><a href="#339015809" title="lb.control.Action">lb.control.Action</a></li>
                    <li class="other"><a href="#419093058" title="lb.control.Purge">lb.control.Purge</a></li>
                    <li class="other"><a href="#421817849" title="lb.control.Start">lb.control.Start</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Standard Library
                <ul class="nav sidebar-group">
                    <li class="current"><a href="control_1096407654.html" title="control.wf">control.wf</a></li>
                    <li class="other"><a href="jobs_2064022591.html" title="jobs.wf">jobs.wf</a></li>
                    <li class="other"><a href="log_1948900833.html" title="log.wf">log.wf</a></li>
                    <li class="other"><a href="stdlib_623000472.html" title="stdlib.wf">stdlib.wf</a></li>
                    <li class="other"><a href="string_1421446234.html" title="string.wf">string.wf</a></li>
                    <li class="other"><a href="tasks_1083303394.html" title="tasks.wf">tasks.wf</a></li>
                    <li class="other"><a href="tdx_1729519909.html" title="tdx.wf">tdx.wf</a></li>
                    <li class="other"><a href="testing-tasks_1856821761.html" title="testing-tasks.wf">testing-tasks.wf</a></li>
                    <li class="other"><a href="workbooks_290480778.html" title="workbooks.wf">workbooks.wf</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Additional Resources
                <ul class="nav sidebar-group">
                    <li class="other"><a href="index.html" title="Index">Index</a></li>
                    <li class="other"><a href="backup_1332419570.html" title="backup/wf/backup.wf">backup/wf/backup.wf</a></li>
                    <li class="other"><a href="load_2058935082.html" title="backup/wf/load.wf">backup/wf/load.wf</a></li>
                    <li class="other"><a href="restore_1204968188.html" title="backup/wf/restore.wf">backup/wf/restore.wf</a></li>
                    <li class="other"><a href="exec_logiql_1742551485.html" title="connectblox/wf/exec_logiql.wf">connectblox/wf/exec_logiql.wf</a></li>
                    <li class="other"><a href="main_633623232.html" title="param/wf/main.wf">param/wf/main.wf</a></li>
                    <li class="other"><a href="partition_1866736532.html" title="partition/wf/partition.wf">partition/wf/partition.wf</a></li>
                    <li class="other"><a href="bar_840371832.html" title="purge/bar.wf">purge/bar.wf</a></li>
                    <li class="other"><a href="fail_1033209759.html" title="purge/fail.wf">purge/fail.wf</a></li>
                    <li class="other"><a href="foo_713015307.html" title="purge/foo.wf">purge/foo.wf</a></li>
                    <li class="other"><a href="url_1270117002.html" title="string/wf/url.wf">string/wf/url.wf</a></li>
                    <li class="other"><a href="export_961675574.html" title="tdx/wf/export.wf">tdx/wf/export.wf</a></li>
                    <li class="other"><a href="import_1592603335.html" title="tdx/wf/import.wf">tdx/wf/import.wf</a></li>
                    <li class="other"><a href="create_873980314.html" title="workbookutil/wf/create.wf">workbookutil/wf/create.wf</a></li>
                    <li class="other"><a href="create2_1323635598.html" title="workbookutil/wf/create2.wf">workbookutil/wf/create2.wf</a></li>
                    <li class="other"><a href="create3_1323665389.html" title="workbookutil/wf/create3.wf">workbookutil/wf/create3.wf</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>

        <div class="col-lg-10 contents">
          <div class="lb-workflow-block">
<h3>Control Service Tasks and Workflows</h3><p>This module declares tasks and workflows that allow to interact with the lb workflow control service and its various commands.</p>          </div>
          <div class="lb-workflow-block" id="419093058">
<p>Issue a request to purge workflow instances from a workspace.</p><p>This task takes some parameters to select which workflow instances to purge. Only instances that are terminated and that match all selection parameters will be purged. Purging a workflow instance means that every detail about it will be deleted from the workspace.</p>
<hr/><p>@param <code>workflow_name</code> name of the workflow to be purged; only terminated  instances of the workflow with this name will be purged.</p><p>@param <code>root_ids</code> a set with ids of root processes of the workflow instances  to be purged.</p><p>@param <code>older_than</code> a duration specifying that workflows that terminated  before now - older_than should be purged. For example, &ldquo;7d&rdquo; means  workflows that terminated up to 7 days ago will be purged.</p><p>@param <code>all</code> indicates that all workflow instances are to be purged. This  flag is only checked if all of the selector parameters above is  <em>not</em> passed to the task.</p><p>@param <code>transport</code> the transport used to execute the service call.</p><p>@param <code>service</code> the URI that exposes the control service.</p><p>@param <code>timeout</code> how long the service call is allowed to take before  attempting to abort it.</p><p>@return <code>purged_root_ids</code>a set with the ids of the root instances of  workflows that were purged.</p><pre><code class="lb-workflow"><span class="keyword">task</span> <span class="task">lb.control.Purge</span>(
    workflow_name<span class="keyword">?</span><span class="separator">,</span>
    root_ids<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    older_than<span class="keyword">?</span><span class="keyword">:</span> <span class="message-type" >Duration</span><span class="separator">,</span>
    all = <span class="boolean">false</span><span class="separator">,</span>
    transport = <span class="string">"http://localhost:55183"</span><span class="separator">,</span>
    service = <span class="string">"/control"</span><span class="separator">,</span>
    timeout<span class="keyword">:</span> <span class="message-type" >Duration</span> = <span class="string">"320s"</span><span class="separator">,</span>
    driver_meta<span class="keyword">?</span>
  ): (purged_root_ids<span class="keyword">*</span>) <span class="keyword">extends</span> <span class="task"><a href="stdlib_623000472.html#296300033">AsyncTask</a></span>(
    driver_meta = <span class="varref">$driver_meta</span><span class="separator">,</span>
    task_implementation_class = <span class="string">"com.logicblox.workflow.task.control.Purge"</span>
  )
</code></pre>
          </div>
          <div class="lb-workflow-block" id="339015809">
<p>Issue a request to perform an action on process instances.</p><p>This task takes a required <code>action</code> to be applied to process instances. The process instances may react to the action in various ways. For example, if tasks are not receptive to that action, it will be ignored; if they are receptive, they may change to a new state.</p><p>This task takes additionally two sets of parameters that help select the targets. A first set is used to determine which workflow instances are in scope (<code>workflow_name</code> and <code>root_ids</code>); a second set is used to select the process instances from the selected workflow instances (<code>process_states</code>, <code>process_ids</code> and <code>workflow_source_names</code>). All these selector parameters are joined, i.e., a process is only selected if it matches all parameters.</p><p>Note that if no workflow instance selector is passed, then the process instance selectors are applied to instances of all workflow instances. However, to select all process instances from all workflows, the <code>all</code> flag must be flipped to <code>true</code>.</p>
<hr/><p>@param <code>action</code> the name of the action to apply. For example, &ldquo;start&rdquo;,  &ldquo;stop&rdquo;, &ldquo;retry&rdquo;, etc.</p><p>@param <code>workflow_name</code> name of the workflow where to lookup target process  instances.</p><p>@param <code>root_ids</code> a set with ids of root processes of the workflow instances  where to lookup targett process instances.</p><p>@param <code>all</code> indicates that all process instances on all workflow instances  are to be targets of the action. This flag is only checked if all of  the selector parameters (for workflow and process instances) are  <em>not</em> passed to the task.</p><p>@param <code>process_states</code> a set of states to select process instances. A  process instance will be selected if it is in any of these states.  For example, &ldquo;Failed&rdquo;, &ldquo;Started&rdquo;, &ldquo;FailedRestartable&rdquo;, etc.</p><p>@param <code>process_ids</code> a set of process ids to be selected as target of the  action. A process instance will be selected if its id is in the set.</p><p>@param <code>workflow_source_names</code> names of source-level <em>workflow</em> in  which the process instance was declared. This refers to the language  abstraction called <em>workflow</em>. For example, if &ldquo;main&rdquo; is passed,  only process instances declared directly in the workflow named  <em>main</em> are going to be targets of the action.</p><p>@param <code>transport</code> the transport used to execute the service call.</p><p>@param <code>service</code> the URI that exposes the control service.</p><p>@param <code>timeout</code> how long the service call is allowed to take before  attempting to abort it.</p><p>@return <code>target_process_ids</code>a set with the ids of the process instances that  were selected to ge the target of the action.</p><pre><code class="lb-workflow"><span class="keyword">task</span> <span class="task">lb.control.Action</span>(
    action<span class="separator">,</span>
    workflow_name<span class="keyword">?</span><span class="separator">,</span>
    root_ids<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    all = <span class="boolean">false</span><span class="separator">,</span>
    process_states<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    process_ids<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    workflow_source_names<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    transport = <span class="string">"http://localhost:55183"</span><span class="separator">,</span>
    service = <span class="string">"/control"</span><span class="separator">,</span>
    timeout<span class="keyword">:</span> <span class="message-type" >Duration</span> = <span class="string">"320s"</span><span class="separator">,</span>
    driver_meta<span class="keyword">?</span>
  ): (target_process_ids<span class="keyword">*</span><span class="keyword">?</span>) <span class="keyword">extends</span> <span class="task"><a href="stdlib_623000472.html#296300033">AsyncTask</a></span>(
    driver_meta = <span class="varref">$driver_meta</span><span class="separator">,</span>
    task_implementation_class = <span class="string">"com.logicblox.workflow.task.control.Action"</span>
  )
</code></pre>
          </div>
          <div class="lb-workflow-block" id="421817849">
<p>Issue a request to start a new instance of a workflow.</p>
<hr/><p>@param <code>workflow_name</code> name of the workflow to start.</p><p>@param <code>args</code> an optional set with parameters to pass to the start request.  To be valid, a parameter must have been left unbound by the main  workflow, and it may not have a default value. This set must contain  strings with the format &ldquo;key=value&rdquo;. The same key can be used  multiple times to pass values to a set variable.</p><p>@param <code>transport</code> the transport used to execute the service call.</p><p>@param <code>service</code> the URI that exposes the control service.</p><p>@param <code>timeout</code> how long the service call is allowed to take before  attempting to abort it.</p><p>@return <code>root_id</code> the id of the newly started workflow instance.</p><pre><code class="lb-workflow"><span class="keyword">task</span> <span class="task">lb.control.Start</span>(
    workflow_name<span class="separator">,</span>
    args<span class="keyword">*</span><span class="keyword">?</span><span class="separator">,</span>
    transport = <span class="string">"http://localhost:55183"</span><span class="separator">,</span>
    service = <span class="string">"/control"</span><span class="separator">,</span>
    timeout<span class="keyword">:</span> <span class="message-type" >Duration</span> = <span class="string">"320s"</span><span class="separator">,</span>
    driver_meta<span class="keyword">?</span>
  ): (root_id<span class="keyword">?</span>) <span class="keyword">extends</span> <span class="task"><a href="stdlib_623000472.html#296300033">AsyncTask</a></span>(
    driver_meta = <span class="varref">$driver_meta</span><span class="separator">,</span>
    task_implementation_class = <span class="string">"com.logicblox.workflow.task.control.Start"</span>
  )
</code></pre>
          </div>
        </div>
      </div>
    </div>
    <script src="jquery.min.js"></script>
    <script src="jquery.hoverIntent.minified.js"></script>
    <script src="bootstrap.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();   
    });
    $(".modal-hook").hoverIntent({
      over: function () {
        var target = $(this).attr("data-target");
        $(target).modal("show");
      },
      interval: 700
    });
    </script>
  </body>
</html>