<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The lb-workflow Samples Directory</title>

    <link href="lb-favicon.png"    rel="shortcut icon" type="image/x-icon" />
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="lb-workflow.css"   rel="stylesheet">    
  </head>
  <body>
    <div class="container header-container">
      <div class="row header">
        <div class="col-lg-2">
          <a href="http://logicblox.com"><img src="lblogo.png" alt="LogicBlox, Inc."></a>
        </div>
        <div class="col-lg-10">
          <a href="index.html"><h1 class="text-center">The lb-workflow Samples Directory</h1></a>
        </div>
      </div>
    </div>

    <div class="container contents-container">
      <div class="row">
        <div class="col-lg-2 sidebar">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav">
              <li class="sidebar-group-header">Workflows
                <ul class="nav sidebar-group">
                    <li class="other"><a href="#3343801" title="main">main</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Standard Library
                <ul class="nav sidebar-group">
                    <li class="other"><a href="control_1096407654.html" title="control.wf">control.wf</a></li>
                    <li class="other"><a href="jobs_2064022591.html" title="jobs.wf">jobs.wf</a></li>
                    <li class="other"><a href="log_1948900833.html" title="log.wf">log.wf</a></li>
                    <li class="other"><a href="stdlib_623000472.html" title="stdlib.wf">stdlib.wf</a></li>
                    <li class="other"><a href="string_1421446234.html" title="string.wf">string.wf</a></li>
                    <li class="other"><a href="tasks_1083303394.html" title="tasks.wf">tasks.wf</a></li>
                    <li class="other"><a href="tdx_1729519909.html" title="tdx.wf">tdx.wf</a></li>
                    <li class="other"><a href="testing-tasks_1856821761.html" title="testing-tasks.wf">testing-tasks.wf</a></li>
                    <li class="other"><a href="workbooks_290480778.html" title="workbooks.wf">workbooks.wf</a></li>
                </ul>
              </li>
              <li class="sidebar-group-header">Additional Resources
                <ul class="nav sidebar-group">
                    <li class="other"><a href="index.html" title="Index">Index</a></li>
                    <li class="other"><a href="backup_1332419570.html" title="backup/wf/backup.wf">backup/wf/backup.wf</a></li>
                    <li class="other"><a href="load_2058935082.html" title="backup/wf/load.wf">backup/wf/load.wf</a></li>
                    <li class="other"><a href="exec_logiql_1742551485.html" title="connectblox/wf/exec_logiql.wf">connectblox/wf/exec_logiql.wf</a></li>
                    <li class="other"><a href="main_633623232.html" title="param/wf/main.wf">param/wf/main.wf</a></li>
                    <li class="other"><a href="partition_1866736532.html" title="partition/wf/partition.wf">partition/wf/partition.wf</a></li>
                    <li class="other"><a href="bar_840371832.html" title="purge/bar.wf">purge/bar.wf</a></li>
                    <li class="other"><a href="fail_1033209759.html" title="purge/fail.wf">purge/fail.wf</a></li>
                    <li class="other"><a href="foo_713015307.html" title="purge/foo.wf">purge/foo.wf</a></li>
                    <li class="other"><a href="url_1270117002.html" title="string/wf/url.wf">string/wf/url.wf</a></li>
                    <li class="other"><a href="export_961675574.html" title="tdx/wf/export.wf">tdx/wf/export.wf</a></li>
                    <li class="other"><a href="import_1592603335.html" title="tdx/wf/import.wf">tdx/wf/import.wf</a></li>
                    <li class="other"><a href="create_873980314.html" title="workbookutil/wf/create.wf">workbookutil/wf/create.wf</a></li>
                    <li class="other"><a href="create2_1323635598.html" title="workbookutil/wf/create2.wf">workbookutil/wf/create2.wf</a></li>
                    <li class="other"><a href="create3_1323665389.html" title="workbookutil/wf/create3.wf">workbookutil/wf/create3.wf</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>

        <div class="col-lg-10 contents">
          <div class="lb-workflow-block" id="3343801">
<pre><code class="lb-workflow"><span class="keyword">main</span> {
  <span class="task modal-hook" data-target="#popup_lb_wb_RecoverMasterWorkbook"><a href="workbooks_290480778.html#1703706357">lb.wb.RecoverMasterWorkbook</a></span>(
    app_prefix = <span class="string">"backup"</span><span class="separator">,</span>
    backup_root = <span class="string">"data/backup"</span><span class="separator">,</span>
    lookup_index = <span class="boolean">true</span><span class="separator">,</span>
    transport = <span class="string">"http://localhost:55183"</span>
  )
}
</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" 
                                    id="popup_lb_wb_RecoverMasterWorkbook" 
                                    tabindex="-1" 
                                    role="dialog" 
                                    aria-labelledby="lb.wb.RecoverMasterWorkbook" 
                                    aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content contents">
          <div class="modal-body">
          <div class="lb-workflow-block" id="1703706357">
<p>Recover the data for the EDB measures of a master workbook from a previous backup.</p><p>If <code>generate_index</code> is true, this task will read a file called <code>latest_backup.txt</code> under <em>backup_root</em>, which should contain a single line with the timestamp of the latest backup. The task will then lookup <code>backup-spec.proto</code> under the directory <em>backup_root/$timestamp</em>, and will proceed loading the csv files in there.</p><p>If <code>generate_index</code> is false, then the <em>backup_root</em> folder itself will be used to lookup <code>backup-spec.proto</code> and the set of csv files.</p>
<hr/><p>@param <code>app_prefix</code> a URI path to construct the service URI. This is the prefix used when  configuring workbook services (via <em>lb:web:workbooks:config:app_prefix</em>) or the modeler  (via <em>modeler_config:services:prefix:master</em>). E.g. <code>&quot;my_project&quot;</code>.</p><p>@param <code>backup_root</code> the location where the files to recover are stored. This should be a directory or  cloud store location. If <em>lookup_index</em> is true, this should point to the directory that  contains the index file; otherwise, this should point to the directory that contains the  data and the backup specification. Avoid trailing slashes.</p><p>@param <code>lookup_index</code> whether the task should use the file in <em>backup_root</em> containing  the timestamp of the latest backup. This is often generated by &ldquo;lb.wb.BackupWorkbook&rdquo;.</p><p>@param <code>transport</code> the transport used to execute service calls. This is used both to lookup the  backup specification service as well as the dynamic TDX services exposed by the workbook  framework.</p><p>@param <code>async</code> whether to use the asynchronous transaction protocol when importing the recovery  data. This is highly recommended as it uses much fewer resources than the synchronous  protocol.</p><p>@param <code>poll_delay</code> when using the asynchronous transaction protocol, the client will send all the specification of  the files to import in a transaction and will then start polling until the transaction is over. This parameter  determines the duration to wait between polls. Note that the client polls immediately after the  commit requests returns, so short transactions may never need to wait.</p><p>@param <code>txn_service</code> the transaction service to use when importing the backup files. If not set,  the default will be the concatenation of <em>app_prefix</em> and <code>&quot;/workbooks/txn&quot;</code>, which is  the prefix exposed by the workbook framework by default. A transaction service is <em>always</em>  used, to ensure that a consistent snapshot is imported.</p><p>@param <code>txn_timeout</code> the timeout for the transaction that imports data, in seconds.</p><pre><code class="lb-workflow"><span class="keyword">task</span> <span class="task">lb.wb.RecoverMasterWorkbook</span>(
    app_prefix<span class="separator">,</span>
    backup_root<span class="separator">,</span>
    lookup_index = <span class="boolean">true</span><span class="separator">,</span>
    transport = <span class="string">"http://localhost:55183"</span><span class="separator">,</span>
    async = <span class="boolean">true</span><span class="separator">,</span>
    poll_delay<span class="keyword">:</span> <span class="message-type" >Duration</span><span class="keyword">?</span><span class="separator">,</span>
    txn_service<span class="keyword">?</span><span class="separator">,</span>
    key<span class="keyword">?</span><span class="separator">,</span>
    txn_timeout<span class="keyword">:</span> <span class="message-type" >Duration</span> = <span class="string">"6000s"</span><span class="separator">,</span>
    driver_meta<span class="keyword">?</span>
  ) <span class="keyword">extends</span> <span class="task"><a href="stdlib_623000472.html#296300033">AsyncTask</a></span>(
    driver_meta = <span class="varref">$driver_meta</span><span class="separator">,</span>
    task_implementation_class = <span class="string">"com.logicblox.workflow.task.wb.RecoverMasterWorkbook"</span>
  )
</code></pre>
          </div>
          </div>
        </div>
      </div>
    </div>
    <script src="jquery.min.js"></script>
    <script src="jquery.hoverIntent.minified.js"></script>
    <script src="bootstrap.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();   
    });
    $(".modal-hook").hoverIntent({
      over: function () {
        var target = $(this).attr("data-target");
        $(target).modal("show");
      },
      interval: 700
    });
    </script>
  </body>
</html>